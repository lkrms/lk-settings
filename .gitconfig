# To go from a working commandline to a working filter:
# 1. replace all \ with \\
# 2. replace all " with \"
# 3. if the filter contains semicolons, double-quote the whole thing

[filter "accels"]
	clean = "sh -c 'h=0 s=\"\" i=\"$(printf \"\\n \")\"&&i=\"${i% }\";while IFS=\"$i\" read -r l;do [ \"$h\" -eq \"0\" ]&&! echo \"$l\"|grep -Eq \"^(; )?\\(gtk_accel_path \"&&printf \"%s\\n\" \"$l\"&&continue;h=1;[ \"${l%\"${l#?}\"}\" = \";\" ]&&continue;s=\"$(printf \"%s\\n%s\\t%s\" \"$s\" \"$(echo \"$l\" | sed \"s/[^a-zA-Z0-9/]//g\")\" \"$l\")\";done;printf \"%s\" \"${s#?}\"|LC_ALL=C sort|cut -f2-'"
	smudge = cat

[filter "clementine"]
	clean = gnu_sed -Ee '/^(username|password|auth_code|login_state|gpodder_device_name|file_path|last_(path|(refreshed|save)[_a-z]*)|download_dir|column_alignments|current_tab|geometry|hidden|maximized|splitter_state|state(_version)?|[\\0-9a-z]*volume|playback_(position|state))=.*$/d'
	smudge = cat

[filter "flameshot"]
	clean = gnu_sed -Ee '/^(drawThickness|savePath)=/d'
	smudge = cat

[filter "geeqie"]
	clean = gnu_sed -Ee '/^\\s+((file_ops\\.safe_delete|home|last)_path|(main|folder|float|properties|log)_window\\.(x|y|w|h|maximized|[a-z]+_pos)) ?=/d'
	smudge = cat

[filter "keepassxc"]
	clean = "awk '/^\\[PasswordGenerator\\]/ { skip=1; next } /^\\[/ { skip=0 } !skip { print }'"
	smudge = cat

[filter "nomacs"]
	clean = gnu_sed -Ee '/^(geometry(Nomacs)?|windowState|[a-zA-Z]+-answer)=/d'
	smudge = cat

[filter "plist"]
	clean = type -P plutil >/dev/null && plutil -convert xml1 -o - - || cat
	smudge = cat

[filter "remmina"]
	clean = gnu_sed -Ee '/^(secret|screenshot_path|recent_SFTP|periodic_rmnews_[a-z_]+)=/d'
	smudge = cat

[filter "speedcrunch"]
	clean = gnu_sed -Ee '/^([^=]+(State|Geometry)|(Format\\\\Type))=/d'
	smudge = cat

[filter "typora"]
	clean = xxd -r -p | jsonlint -Sf | jq -S --indent 4 'del(.\"sidebar-width\", .customZoom, .initialize_ver, .lastClosedBounds, .lastSavePath, .pinFolder, .sidebar_tab, .uuid, .zoomFactor, .zoomLevel)'
	smudge = sh -c 'echo \"$(cat)\" | tac | gnu_sed -E \"2s/,\\$//\" | tac | jq -c | xxd -p | tr -d \"\\\\n\"'

[filter "vscodesettings"]
	clean = jsonlint -Sf | jq -S --indent 4 'del(.\"breadcrumbs.enabled\", .\"editor.fontSize\", .\"editor.minimap.enabled\", .\"salesforcedx-vscode-apex.java.home\", .\"window.zoomLevel\", .\"workbench.colorTheme\")'
	smudge = cat

[filter "whiskermenu"]
	clean = gnu_sed -Ee '/^(recent|menu-(width|height)|[a-z]+-icon-size)=.*$/d'
	smudge = cat

[filter "xfpanelswitch"]
	clean = sh -c 'gnu_tar -jx config.txt -O </dev/stdin'
	smudge = sh -c 'TEMP_DIR=\"$(mktemp -d)\"&&cat </dev/stdin >\"$TEMP_DIR/config.txt\"&&gnu_tar -jcC \"$TEMP_DIR\" config.txt'
